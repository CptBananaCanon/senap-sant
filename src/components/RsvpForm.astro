---
import SectionHeader from './SectionHeader.astro';
import ContentBlock from './ContentBlock.astro';
---

<div id="osa" class="max-w-[1000px] mx-auto px-4 md:px-6 pb-16 md:pb-24 scroll-mt-20">
  <SectionHeader title="OSA" />
  
  <ContentBlock>
    <form 
      action="https://formspree.io/f/YOUR_FORM_ID" 
      method="POST" 
      class="space-y-6"
      id="rsvp-form"
    >
      <div>
        <label for="guests" class="block text-neutral-800 font-medium mb-2 text-base">
          Antal gäster
        </label>
        <select 
          id="guests" 
          name="guests" 
          required
          class="w-full px-5 py-4 border border-neutral-300 rounded focus:outline-none focus:border-[#d97706] focus:ring-1 focus:ring-[#d97706]/20 bg-white text-neutral-900 text-base"
        >
          <option value="">Välj antal</option>
          <option value="1">1 person</option>
          <option value="2">2 personer</option>
          <option value="3">3 personer</option>
          <option value="4">4 personer</option>
          <option value="5">5 personer</option>
        </select>
      </div>
      
      <div>
        <label for="dietary" class="block text-neutral-800 font-medium mb-2 text-base">
          Särskilda kostbehov
        </label>
        <textarea 
          id="dietary" 
          name="dietary" 
          rows="4"
          placeholder="Allergier, vegetariskt, glutenfritt, etc."
          class="w-full px-5 py-4 border border-neutral-300 rounded focus:outline-none focus:border-[#d97706] focus:ring-1 focus:ring-[#d97706]/20 bg-white text-neutral-900 resize-none text-base"
        ></textarea>
      </div>
      
      <div>
        <label for="email" class="block text-neutral-800 font-medium mb-2 text-base">
          E-postadress <span class="text-[#dc2626]">*</span>
        </label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          required
          placeholder="din@epost.se"
          class="w-full px-5 py-4 border border-neutral-300 rounded focus:outline-none focus:border-[#d97706] focus:ring-1 focus:ring-[#d97706]/20 bg-white text-neutral-900 text-base"
        />
      </div>
      
      <button 
        type="submit"
        class="w-full bg-[#dc2626] text-white font-semibold py-5 px-8 rounded text-base hover:bg-[#b91c1c] transition-colors duration-200 tracking-wide"
      >
        Jag kommer!
      </button>
    </form>
  </ContentBlock>
</div>

<script>
  const form = document.getElementById('rsvp-form');
  
  if (form) {
    form.addEventListener('submit', (e) => {
      const email = form.querySelector('#email') as HTMLInputElement;
      const guests = form.querySelector('#guests') as HTMLSelectElement;
      
      if (!email.value || !guests.value) {
        e.preventDefault();
        alert('Vänligen fyll i alla obligatoriska fält.');
        return false;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email.value)) {
        e.preventDefault();
        alert('Vänligen ange en giltig e-postadress.');
        return false;
      }
    });
  }
</script>
